@import "./reset.styl"

// brand colours
$sf-black = #221E1F // not resampled yet
$sf-rich-black = #040506 // not resampled yet
$sf-ui-gray-dark = #B8C2CD // not resampled yet
$sf-ui-gray-light = #dde1e7 // not resampled yet

$sf-ui-blue = #28aae1 // strong hit
$sf-ui-purple = #892890 // weak hit
$sf-ui-red = #ce242b // miss
$sf-shallows = #3d8b8a // companion
$sf-forest = #40834f // deed
$sf-sky = #3f7faa // path
$sf-ocean = #495790 // support vehicle
$sf-oracle = #7f5a90 // module
$sf-iron = #9aa3ad // command vehicle

// basic ux colors
$color-fg = $sf-black // old: #4c4d4f
$color-bg = #fff
$color-bg-alt = $sf-ui-gray-light // old: #e4e4e4. for alternating table rows, etc
$color-fg-lowkey = $sf-ui-gray-dark // 'faded' foreground colour
$color-input = $sf-ui-gray-dark // old: #ccc. textinput background, when hovering over usable objects
$color-highlight = #fd0 // highlights active fields
$color-cta = $sf-ui-blue
$color-warning = $sf-ui-red
// 'close preview', 'delete', etc

// base text size
// $base-font-size

// typography
$header-font-lg = "Exo", sans-serif
// $body-font = "Encode Sans Expanded", sans-serif
$body-font = "Encode Sans Semi Expanded", sans-serif
$header-font-sm = $body-font
$compact-font = "Encode Sans Condensed", sans-serif


borderCommon(width=2px)
  border width solid $color-fg

btn(fontSize = 14px)
  borderCommon()
  border-radius 0
  display flex
  width auto
  font-size fontSize
  padding 0
  cursor pointer
  background $color-bg
  letter-spacing 0.1ch
btnAttached(fontSize = 14px)
  btn(fontSize)
  border none
  border-right 1px solid $color-fg

inputHighlight(shadow)
  &:focus
    outline 3px solid $color-highlight
    outline-offset 0
    box-shadow inset 0 0 0 shadow

visOff()
  visibility hidden !important
  height 0 !important
  width 0 !important
  overflow hidden !important
  opacity 0 !important
  border 0 !important
  padding 0 !important
  margin 0 !important
visOn()
  visibility visible !important
  opacity 1 !important
fadeIn()
  transition opacity 0.5s ease

// switchDisplayOff() // simplest version for stuff that doesn't need a fadein/fadeout
//   display none

// switchDisplayOn(displayMode=flex)
//   display displayMode

// switchVisOff(time=0.2s) // for pages
//   visibility collapse
//   // sept 16 2021: proper collapse support in chrome/safari would obviate the need to set height/overflow, but alas, no. someday...
//   transition visibility, opacity time ease
//   opacity 0
//   height 0
//   overflow hidden

// switchVisOn() // for pages
//   visibility visible
//   opacity 100%
//   height auto
//   overflow unset

dark()
  background $color-fg
  color $color-bg

light()
  background $color-bg
  color $color-fg

interactiveHover(bg=$color-fg, fg=$color-bg)
  cursor pointer
  transition 0.5s ease
  &:hover
    background-color bg !important
    color fg !important

interactiveActive(bg=$color-fg, fg=$color-bg)
  background-color bg !important
  color fg !important

stdFont(primary = false)
  if primary
    font-family primary, Arial, sans-serif
  else
    font-family $body-font

iconBtn(iconUrl)
  &:before
    display block
    width 100%
    height 100%
    margin 0
    padding 0
    border none
    font-size unset
    line-height unset
    background-color currentColor
    background-origin border-box
    mask-image url(iconUrl)
    mask-size 90% // contain could also work, but this pads it out a bit
    mask-repeat no-repeat
    mask-position center
    mask-origin content-box
    top 0
    left 0
    position relative
    content ""

bulletBefore(forTextSize, iconUrl)
  margin-left (forTextSize * 1.5)
  &:before
    content '';
    display inline-block;
    height (forTextSize * 0.75)
    width (forTextSize * 0.75)
    -webkit-mask-image: url(iconUrl);
    -webkit-mask-size: contain;
    -webkitmask-repeat: no-repeat
    mask-image: url(iconUrl);
    mask-size: contain
    mask-repeat: no-repeat
    background-color currentColor
    margin-right (forTextSize / 4)
    margin-left -(forTextSize * 1)

headerText(wt = 900, spacing = 0.05ch)
  text-transform uppercase
  font-weight wt
  letter-spacing 0.05ch


// places a double width stroke behind to fake an outside stroke
textOutline(strokeColor, strokeWidth=2px)
  paint-order stroke fill
  text-stroke strokeWidth*2 strokeColor
  -webkit-text-stroke strokeWidth*2 strokeColor

$hexagon_pointy = polygon(50% 0, 100% 25%, 100% 75%, 50% 100%, 0 75%, 0 25%)

$hexagon_flat = polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)

hexagonMask()
  mask-image url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-checkbox-checked.svg")
  mask-position center
  mask-size contain
  mask-repeat no-repeat

// hexagonBg()

hexWidthToHeight(hexWidth)
  (hexWidth / (math(3, sqrt)/2))

hexagonClip(hexWidth) // sets width and height to ensure correct proportion
  width hexWidth
  height hexWidthToHeight(hexWidth)
  clip-path $hexagon_pointy
  // TODO: as svg clip path? url + #id

hexCheckbox(hexWidth, emptyImage="https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-checkbox-unchecked.svg")
  -moz-appearance none
  appearance none
  hexagonClip(hexWidth)
  cursor pointer
  border none
  width hexWidth
  height hexWidthToHeight(hexWidth)
  color currentColor
  background-color transparent
  background-image url(emptyImage)
  background-size 100%
  background-position center
  transition all ease 0.3s
  &:hover
    background-color $color-fg-lowkey
  &:checked
    background-color currentColor