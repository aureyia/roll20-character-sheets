include ./actions
include ./body

mixin actionDieCancelled(opts)
  div.sheet-result-body.sheet-result-row
    div(data-i18n='previous-action-score')=translation['previous-action-score']
    div {{#{opts.type}}}
  div.sheet-result-body.sheet-result-row
    div.sheet-subfooter.sheet-alert(data-i18n='momentum-cancel')=translation['momentum-cancel']
  div.sheet-result-body.sheet-result-row
    div(data-i18n='stat-plus-add')=translation['stat-plus-add']
    div {{stat}} + {{add}}
  div.sheet-result-body.sheet-result-row
    div(data-i18n='new-action-score')=translation['new-action-score']
    div {{modifiers}}
  div.sheet-result-body.sheet-result-row
    div(data-i18n='challenge-dice')=translation['challenge-dice']
    div {{challenge1}} {{challenge2}}
  +actionRollResult('modifiers')

mixin momentumCancelActionDie(opts, type)
  | {{#rollTotal() momentum #{opts.momentum}}}
  | {{#rollTotal() #{type} cancel#{opts.die}}}
  +actionDieCancelled({momentum: true, type: type})
  | {{/rollTotal() #{type} cancel#{opts.die}}}
  | {{#^rollTotal() #{type} cancel#{opts.die}}}
  +actionRollBody(type)
  +actionRollResult(type)
  | {{/^rollTotal() #{type} cancel#{opts.die}}}
  | {{/rollTotal() momentum #{opts.momentum}}}
