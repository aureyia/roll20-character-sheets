input[type="checkbox"].showhide:checked ~ .showhide
  showHide()

select
  &.path-dropdown
    option[value="alchemist"]
      & ~ .alchemist
        display flex
        showHide()

input[type="radio"].asset-builder:checked + div.asset-builder,
input[type="radio"].asset-view:checked + div.asset-view
  display block
  showHide()

input[type="checkbox"].builder-titles-1:checked ~ div.builder-titles-1,
input[type="checkbox"].builder-titles-2:checked ~ div.builder-titles-2,
input[type="checkbox"].builder-titles-3:checked ~ div.builder-titles-3,
input[type="checkbox"].builder-ability-1-text:checked ~ div.builder-ability-1-text,
input[type="checkbox"].builder-ability-1-text-input:checked ~ div.builder-ability-1-text-input,
input[type="checkbox"].builder-ability-2-text:checked ~ div.builder-ability-2-text,
input[type="checkbox"].builder-ability-2-text-input:checked ~ div.builder-ability-2-text-input,
input[type="checkbox"].builder-ability-3-text:checked ~ div.builder-ability-3-text,
input[type="checkbox"].builder-ability-3-text-input:checked ~ div.builder-ability-3-text-input,
input[type="checkbox"].meter-dropdown-1:checked ~ div.meter-dropdown-1,
input[type="checkbox"].meter-dropdown-2:checked ~ div.meter-dropdown-2,
input[type="checkbox"].meter-dropdown-3:checked ~ div.meter-dropdown-3,
input[type="checkbox"].meter-dropdown-4:checked ~ div.meter-dropdown-4,
input[type="checkbox"].meter-dropdown-5:checked ~ div.meter-dropdown-5,
input[type="checkbox"].meter-dropdown-6:checked ~ div.meter-dropdown-6
  display flex
  showHide()

div.builder-titles-1,
div.builder-titles-2,
div.builder-titles-3
  flex-flow column
  margin-bottom 0.3em

.view-title-width
  width 22em
  margin 0em 1em

.custom
  > input[type=radio]
    margin-left: 4px
  div[class|=builder-ability]
    align-items: flex-start

div.asset-view,
div.asset-builder
  margin-top 0.3em

input[type=checkbox].custom-asset-ability
  opacity 1
  margin 0px 5px 0 5px

.custom-meter
  width 20.5em
  margin 0 !important

.ability-checkbox,
.build-text
  stdFont('Encode Sans Condensed')
  font-size 13px
  resize none
  height 100px
  width 22em
  margin 0em 0.5em 0em 0.4em

.ability-text
  stdFont('Encode Sans Condensed')
  font-size 14.3px
  resize none
  height 100px
  margin-bottom 0em
  width 18em

.builder-dropdown
  font-size 14px

.asset-description
  margin 0 12px 0px 12px
  stdFont('Encode Sans Condensed')

div
  &.assets
    display block !important
    text-align left
    .repcontainer
      display flex
      flex-flow row wrap
      padding 0.5em
      stdFont('Encode Sans Condensed')
      justify-content space-evenly
      .repitem
        float left !important


$asset_width = 320px
$inch = $asset_width/2.5 // pixels per inch
$point = $inch/72 // pixels per point

.asset
  display inline-block
  width $asset_width
  input
    width inherit
    &.border-bottom
      border-bottom-color $fg-color
      padding 0

.asset-card
  std-font('Encode Sans Condensed')
  display grid
  font-size 12px
  padding 9*$point 9*$point // 9 points
  // (0.125*$inch)-(1*$point) // offset to account for border width
  font-weight 400
  letter-spacing 0.025rem
  box-sizing border-box
  width $asset_width // 320px
  height (3.5*$inch) !important // 448px; TODO: fix the !important cuz it makes me nervous
  border (1*$point) solid #B7C3CE
  background-origin border-box
  background-repeat no-repeat
  background-position top right
  background-size (0.950*$inch) auto
  grid-template-areas "assetcategory icon" "name icon" "input icon" "description icon" "body body" "footer footer"
  grid-template-columns 1fr (0.5*$inch) // 1/5 of the width
  grid-template-rows max-content max-content max-content max-content 1fr max-content
  gap 2*$point
  .asset-category, .asset-name
    std-font("Exo")
    text-transform uppercase
    // margin-bottom 2*$point
  .asset-name
    grid-area name
    font-weight 800
    height 9.25*$point // we want height 16px
    line-height 9.25*$point
    font-size 1.3125*9.25*$point
  .asset-category
    grid-area assetcategory
    font-weight 600
    height 5.75*$point
    line-height 5.75*$point
    font-size 1.3125*5.75*$point
  .asset-icon
    box-sizing border-box
    grid-area icon
    width (36*$point)
    height ((36*$point) / (math(3, sqrt)/2))
    align-self start
    justify-self end
    padding 0
    margin 0
    margin-top 0px
    margin-top -1.25px
  .asset-textinput
    display flex
    grid-area input
    // height 5.35*$point
    // line-height 5.35*$point
    font-size 1.3125*5.35*$point
    border-bottom 1*$point solid black
    width stretch
    width -moz-available
    span
      align-self end
      color #B7C3CE
      height min-content
      width max-content
      std-font("Exo")
      text-transform uppercase
      line-height 1
      // margin-bottom 2*$point
      font-weight 600
    input[type=text]
      std-font("Encode Sans Condensed")
      width stretch
      width -moz-available
      border none
      margin-bottom: -3%;
      font-weight 500
      background: transparent;
  .asset-abilities
    grid-area body
    display flex
    flex-flow column
    gap 2*$point
    .asset-ability
      display flex
      gap 3*$point
      ul, ul li
        margin 0
        padding 0
      ul li
        margin 2*$point 0
      input[type="checkbox"]
        border none
        flex-shrink: 0
        flex-grow: 0
        width 0.110*$inch
        height (0.110*$inch / (math(3, sqrt)/2))
        color black
        align-self start
        -moz-appearance none
        appearance none
        background-color transparent
        background-image: url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-checkbox-unchecked.svg")
        transition: all ease 0.3s;
        mask-image: url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-checkbox-checked.svg")
        background-size 100%
        mask-size 100%
        background-position: center
        mask-position: center
        &:checked
          background-color black
      // label.asset-ability-textinput
  .asset-meter
    // height of numbers: 6.5pt
    // height of small labels: 5.35 (same as input label)
    grid-area footer
    display flex
    flex-direction row-reverse
    justify-content flex-end
    label.asset-meter-box
      width (0.250*$inch)
      height (0.250*$inch / (math(3, sqrt)/2))
      display flex
      flex-direction column
      justify-content center
      align-items center
      border none
      padding 0
      margin 0
      margin-right -1.3*$point
      span
        color black
      input[type=radio] // doesn't appear to work as a sibling cuz the id is ambiguous. oof.
        border none
        -moz-appearance none
        appearance none
        // color black
        color black
        background-color transparent
        background-image: url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-meter-box.svg")
        transition: all ease 0.3s;
        mask-image: url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-checkbox-checked.svg")
        background-size 100%
        mask-size 100%
        background-position: center
        mask-position: center
        height inherit
        width inherit
        &::after
          std-font("Exo")
          font-weight 700
          display block
          text-align center
          position relative
          top 0
          left 0
          width 100%
          height 100%
          pointer-events none
          font-size 1.5em
          // line-height 30%
          // padding-top 50%
        &:checked
          background-color black
          color white
          // & ~ span
          //   color white


// the sanitizer doesn't like this much. simplest version might be 50% grey numbers in Exo built into the svg
// or as their own svg?

// for num in (0..6)
//   .asset-meter-box input[type=radio][value={num}]::after
//     content '+'+num

// .charsheet .asset-meter-box input[type=radio]
//   [value=0]::after
//     content: '+ 0'
//   [value=1]::after
//     content: '+ 1'
//   [value=2]::after
//     content: '+ 2'
//   [value=3]::after
//     content: '+ 3'
//   [value=4]::after
//     content: '+ 4'
//   [value=5]::after
//     content: '+ 5'
//   [value=6]::after
//     content: '+ 6'


.asset-type-selection
  background $fg-color
  color $bg-color
  border 0

.asset-type-dropdown
  color $bg-color
  background $fg-color
  width auto
  font-size 15px
  font-weight bold
  text-transform uppercase
  -webkit-appearance menulist
  margin 6px 4px

.sub-dropdown
  -webkit-appearance menulist
  width auto
  margin 7px 4px
  font-weight bold
  text-transform uppercase

.asset-meter-wrapper
  display flex
  justify-content flex-end
  flex-direction row-reverse
  font-family "Exo", sans-serif
  font-weight 700
  .asset-meter-box
    &:first-child input[type="radio"]:checked + .asset-meter-box-display
      // paint-order stroke fill
      // text-stroke $sf-ui-red 2px
      // -webkit-text-stroke $sf-ui-red 2px
      background-color $sf-ui-red
    &:last-child input[type="radio"]:checked + .asset-meter-box-display
      // paint-order stroke fill
      // text-stroke $sf-ui-blue 2px
      // -webkit-text-stroke $sf-ui-blue 2px
      background-color $sf-ui-blue
    display flex
    height 36px
    margin 0
    padding 0
    width 31px
    margin-right -2.5px
    cursor pointer
    input[type="radio"]
      display none
    .asset-meter-box-display
      mask-image url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-meter-box-checked.svg")
      mask-position center
      mask-repeat no-repeat
      mask-size contain
      background-image url("https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-meter-box-unchecked.svg")
      background-color $bg-color
      background-repeat no-repeat
      background-size contain
      background-position center
      font-size 17px
      font-weight bold
      display flex
      height inherit
      width inherit
      text-align center
      text-anchor middle
      align-items center
      justify-content center
      transition 0.5s ease
      color $sf-ui-gray-dark
      -webkit-text-stroke 0px transparent
      // text-stroke 0px transparent
      &:hover
        color $fg-color
    input[type="radio"]:checked + .asset-meter-box-display
      background-color $fg-color
      color $bg-color


.asset-meter-wrapper-wordy
  text-transform uppercase
  .asset-meter-box
    flex-direction row

.asset-meter-box-display
  font-size 17px
  font-weight bold

.ability-top
  margin-top 1em

.builder-name
  margin-bottom 0.5em

span.custom-asset-page
  margin-left 0.3em
  margin-right 0.5em

.asset-description-text
  margin-top: 0.4em

.asset-body
  font-size 14.3px
  line-height 1.25
  margin 0 0 4px


// TODO: pull all assets from json and create a template for each
// assets = json('starforged_assets_wip_june_2.json', { hash: true, leave-strings: true })
// for asset in assets
//   name = asset.Name.toLowerCase().replace(/\s/g, '-')
//   // input[type='checkbox'].name:checked ~ div.name
//   input[type='checkbox'].{name}:checked ~ div.{name}
//     display block
//     showHide()

input[type=checkbox].custom:checked + div.custom
  display block
  showHide()

input[type=checkbox][name=attr_asset][value=asset-ace]:checked + div.asset-card.asset-ace,
input[type=checkbox][name=attr_asset][value=asset-agent]:checked + div.asset-card.asset-agent,
input[type=checkbox][name=attr_asset][value=asset-archer]:checked + div.asset-card.asset-archer,
input[type=checkbox][name=attr_asset][value=asset-armored]:checked + div.asset-card.asset-armored,
input[type=checkbox][name=attr_asset][value=asset-augmented]:checked + div.asset-card.asset-augmented,
input[type=checkbox][name=attr_asset][value=asset-bannersworn]:checked + div.asset-card.asset-bannersworn,
input[type=checkbox][name=attr_asset][value=asset-banshee]:checked + div.asset-card.asset-banshee,
input[type=checkbox][name=attr_asset][value=asset-blademaster]:checked + div.asset-card.asset-blademaster,
input[type=checkbox][name=attr_asset][value=asset-bonded]:checked + div.asset-card.asset-bonded,
input[type=checkbox][name=attr_asset][value=asset-bounty-hunter]:checked + div.asset-card.asset-bounty-hunter,
input[type=checkbox][name=attr_asset][value=asset-brawler]:checked + div.asset-card.asset-brawler,
input[type=checkbox][name=attr_asset][value=asset-combat-bot]:checked + div.asset-card.asset-combat-bot,
input[type=checkbox][name=attr_asset][value=asset-commander]:checked + div.asset-card.asset-commander,
input[type=checkbox][name=attr_asset][value=asset-courier]:checked + div.asset-card.asset-courier,
input[type=checkbox][name=attr_asset][value=asset-devotant]:checked + div.asset-card.asset-devotant,
input[type=checkbox][name=attr_asset][value=asset-diplomat]:checked + div.asset-card.asset-diplomat,
input[type=checkbox][name=attr_asset][value=asset-empath]:checked + div.asset-card.asset-empath,
input[type=checkbox][name=attr_asset][value=asset-explorer]:checked + div.asset-card.asset-explorer,
input[type=checkbox][name=attr_asset][value=asset-fated]:checked + div.asset-card.asset-fated,
input[type=checkbox][name=attr_asset][value=asset-firebrand]:checked + div.asset-card.asset-firebrand,
input[type=checkbox][name=attr_asset][value=asset-fugitive]:checked + div.asset-card.asset-fugitive,
input[type=checkbox][name=attr_asset][value=asset-gearhead]:checked + div.asset-card.asset-gearhead,
input[type=checkbox][name=attr_asset][value=asset-glowcat]:checked + div.asset-card.asset-glowcat,
input[type=checkbox][name=attr_asset][value=asset-gunner]:checked + div.asset-card.asset-gunner,
input[type=checkbox][name=attr_asset][value=asset-gunslinger]:checked + div.asset-card.asset-gunslinger,
input[type=checkbox][name=attr_asset][value=asset-haunted]:checked + div.asset-card.asset-haunted,
input[type=checkbox][name=attr_asset][value=asset-healer]:checked + div.asset-card.asset-healer,
input[type=checkbox][name=attr_asset][value=asset-homesteader]:checked + div.asset-card.asset-homesteader,
input[type=checkbox][name=attr_asset][value=asset-kinetic]:checked + div.asset-card.asset-kinetic,
input[type=checkbox][name=attr_asset][value=asset-lore-hunter]:checked + div.asset-card.asset-lore-hunter,
input[type=checkbox][name=attr_asset][value=asset-loyalist]:checked + div.asset-card.asset-loyalist,
input[type=checkbox][name=attr_asset][value=asset-marked]:checked + div.asset-card.asset-marked,
input[type=checkbox][name=attr_asset][value=asset-mercenary]:checked + div.asset-card.asset-mercenary,
input[type=checkbox][name=attr_asset][value=asset-naturalist]:checked + div.asset-card.asset-naturalist,
input[type=checkbox][name=attr_asset][value=asset-navigator]:checked + div.asset-card.asset-navigator,
input[type=checkbox][name=attr_asset][value=asset-oathbreaker]:checked + div.asset-card.asset-oathbreaker,
input[type=checkbox][name=attr_asset][value=asset-outcast]:checked + div.asset-card.asset-outcast,
input[type=checkbox][name=attr_asset][value=asset-protocol-bot]:checked + div.asset-card.asset-protocol-bot,
input[type=checkbox][name=attr_asset][value=asset-revenant]:checked + div.asset-card.asset-revenant,
input[type=checkbox][name=attr_asset][value=asset-rockhorn]:checked + div.asset-card.asset-rockhorn,
input[type=checkbox][name=attr_asset][value=asset-scavenger]:checked + div.asset-card.asset-scavenger,
input[type=checkbox][name=attr_asset][value=asset-scoundrel]:checked + div.asset-card.asset-scoundrel,
input[type=checkbox][name=attr_asset][value=asset-seer]:checked + div.asset-card.asset-seer,
input[type=checkbox][name=attr_asset][value=asset-shade]:checked + div.asset-card.asset-shade,
input[type=checkbox][name=attr_asset][value=asset-sidekick]:checked + div.asset-card.asset-sidekick,
input[type=checkbox][name=attr_asset][value=asset-slayer]:checked + div.asset-card.asset-slayer,
input[type=checkbox][name=attr_asset][value=asset-sniper]:checked + div.asset-card.asset-sniper,
input[type=checkbox][name=attr_asset][value=asset-sprite]:checked + div.asset-card.asset-sprite,
input[type=checkbox][name=attr_asset][value=asset-survey-bot]:checked + div.asset-card.asset-survey-bot,
input[type=checkbox][name=attr_asset][value=asset-symbiote]:checked + div.asset-card.asset-symbiote,
input[type=checkbox][name=attr_asset][value=asset-tech]:checked + div.asset-card.asset-tech,
input[type=checkbox][name=attr_asset][value=asset-trader]:checked + div.asset-card.asset-trader,
input[type=checkbox][name=attr_asset][value=asset-utility-bot]:checked + div.asset-card.asset-utility-bot,
input[type=checkbox][name=attr_asset][value=asset-vanguard]:checked + div.asset-card.asset-vanguard,
input[type=checkbox][name=attr_asset][value=asset-vestige]:checked + div.asset-card.asset-vestige,
input[type=checkbox][name=attr_asset][value=asset-veteran]:checked + div.asset-card.asset-veteran,
input[type=checkbox][name=attr_asset][value=asset-voidborn]:checked + div.asset-card.asset-voidborn,
input[type=checkbox][name=attr_asset][value=asset-voidglider]:checked + div.asset-card.asset-voidglider,
input[type=checkbox][name=attr_asset][value=asset-weapon-master]:checked + div.asset-card.asset-weapon-master,
input[type=checkbox][name=attr_asset][value=asset-engine-upgrade]:checked + div.asset-card.asset-engine-upgrade,
input[type=checkbox][name=attr_asset][value=asset-expanded-hold]:checked + div.asset-card.asset-expanded-hold,
input[type=checkbox][name=attr_asset][value=asset-grappler]:checked + div.asset-card.asset-grappler,
input[type=checkbox][name=attr_asset][value=asset-heavy-cannons]:checked + div.asset-card.asset-heavy-cannons,
input[type=checkbox][name=attr_asset][value=asset-internal-refit]:checked + div.asset-card.asset-internal-refit,
input[type=checkbox][name=attr_asset][value=asset-medbay]:checked + div.asset-card.asset-medbay,
input[type=checkbox][name=attr_asset][value=asset-missile-array]:checked + div.asset-card.asset-missile-array,
input[type=checkbox][name=attr_asset][value=asset-overseer]:checked + div.asset-card.asset-overseer,
input[type=checkbox][name=attr_asset][value=asset-reinforced-hull]:checked + div.asset-card.asset-reinforced-hull,
input[type=checkbox][name=attr_asset][value=asset-research-lab]:checked + div.asset-card.asset-research-lab,
input[type=checkbox][name=attr_asset][value=asset-sensor-array]:checked + div.asset-card.asset-sensor-array,
input[type=checkbox][name=attr_asset][value=asset-shields]:checked + div.asset-card.asset-shields,
input[type=checkbox][name=attr_asset][value=asset-stealth-tech]:checked + div.asset-card.asset-stealth-tech,
input[type=checkbox][name=attr_asset][value=asset-vehicle-bay]:checked + div.asset-card.asset-vehicle-bay,
input[type=checkbox][name=attr_asset][value=asset-workshop]:checked + div.asset-card.asset-workshop,
input[type=checkbox][name=attr_asset][value=asset-exosuit]:checked + div.asset-card.asset-exosuit,
input[type=checkbox][name=attr_asset][value=asset-hoverbike]:checked + div.asset-card.asset-hoverbike,
input[type=checkbox][name=attr_asset][value=asset-rover]:checked + div.asset-card.asset-rover,
input[type=checkbox][name=attr_asset][value=asset-service-pod]:checked + div.asset-card.asset-service-pod,
input[type=checkbox][name=attr_asset][value=asset-shuttle]:checked + div.asset-card.asset-shuttle,
input[type=checkbox][name=attr_asset][value=asset-skiff]:checked + div.asset-card.asset-skiff,
input[type=checkbox][name=attr_asset][value=asset-snub-fighter]:checked + div.asset-card.asset-snub-fighter,
input[type=checkbox][name=attr_asset][value=asset-engine-upgrade]:checked + div.asset-card.asset-engine-upgrade,
input[type=checkbox][name=attr_asset][value=asset-expanded-hold]:checked + div.asset-card.asset-expanded-hold,
input[type=checkbox][name=attr_asset][value=asset-grappler]:checked + div.asset-card.asset-grappler,
input[type=checkbox][name=attr_asset][value=asset-heavy-cannons]:checked + div.asset-card.asset-heavy-cannons,
input[type=checkbox][name=attr_asset][value=asset-internal-refit]:checked + div.asset-card.asset-internal-refit,
input[type=checkbox][name=attr_asset][value=asset-medbay]:checked + div.asset-card.asset-medbay,
input[type=checkbox][name=attr_asset][value=asset-missile-array]:checked + div.asset-card.asset-missile-array,
input[type=checkbox][name=attr_asset][value=asset-overseer]:checked + div.asset-card.asset-overseer,
input[type=checkbox][name=attr_asset][value=asset-reinforced-hull]:checked + div.asset-card.asset-reinforced-hull,
input[type=checkbox][name=attr_asset][value=asset-research-lab]:checked + div.asset-card.asset-research-lab,
input[type=checkbox][name=attr_asset][value=asset-sensor-array]:checked + div.asset-card.asset-sensor-array,
input[type=checkbox][name=attr_asset][value=asset-shields]:checked + div.asset-card.asset-shields,
input[type=checkbox][name=attr_asset][value=asset-stealth-tech]:checked + div.asset-card.asset-stealth-tech,
input[type=checkbox][name=attr_asset][value=asset-vehicle-bay]:checked + div.asset-card.asset-vehicle-bay,
input[type=checkbox][name=attr_asset][value=asset-workshop]:checked + div.asset-card.asset-workshop,
input[type=checkbox][name=attr_asset][value=asset-exosuit]:checked + div.asset-card.asset-exosuit,
input[type=checkbox][name=attr_asset][value=asset-hoverbike]:checked + div.asset-card.asset-hoverbike,
input[type=checkbox][name=attr_asset][value=asset-rover]:checked + div.asset-card.asset-rover,
input[type=checkbox][name=attr_asset][value=asset-service-pod]:checked + div.asset-card.asset-service-pod,
input[type=checkbox][name=attr_asset][value=asset-shuttle]:checked + div.asset-card.asset-shuttle,
input[type=checkbox][name=attr_asset][value=asset-skiff]:checked + div.asset-card.asset-skiff,
input[type=checkbox][name=attr_asset][value=asset-snub-fighter]:checked + div.asset-card.asset-snub-fighter
  display block
  showHide()

span.asset-name
  stdFont('Exo')
  font-size 1.5em
  font-weight bold
  text-transform uppercase

.asset-content-header
  display flex
  justify-content space-between

.asset-details
  align-self center
  padding-left 1em

.category
  stdFont('Exo')
  font-size 1.1em
  text-transform uppercase
  font-weight bold

.asset-options-header
  padding 0.2em 0.4em
  background $fg-color
  color $bg-color
  width 100%
  border 0
  border-radius 0.4em 0.4em 0em 0em
  font-size 1em
  text-transform uppercase
  stdFont('Exo')
  &:placeholder
    color #b9b9b9

.custom
  padding 0.5em

$categories = {
  'path': $sf-sky,
  'companion':$sf-shallows,
  'module': $sf-oracle,
  'support-vehicle': $sf-ocean,
  'deed': $sf-forest,
  'command-vehicle': $sf-iron
}

for key, category in $categories
  .asset-card.category-{key}
    .asset-category
      color category
    background-image: url('https://raw.githubusercontent.com/aureyia/roll20-character-sheets/starforged-ui-components/Ironsworn-Starforged/src/app/img/hex-asset-bg-' + key + '.svg');