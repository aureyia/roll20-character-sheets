include ../../common/pug/button

mixin otherImpact(index)
  .impact
    input(
      type='checkbox'
      name=`attr_impactOther${index}`
    )
    input(
      type='text'
      name=`attr_impactOther${index}_name`
      data-i18n-placeholder='impact'
      placeholder=translation['impact']
    )


mixin impactToggle(impact)
  - let toggleId = `toggle-${impact.translationId}`
  //- input(hidden type="checkbox" name=`attr_${impact.attribute}` id=toggleId class=[`toggle-impact`, `toggle-control`])
  //- label(for=toggleId).toggle-btn.toggle-impact
  //-   +i18n(impact.translationId)
  +attrToggle(impact.attribute, toggleId, impact.translationId, ["toggle-impact"], false)

mixin impacts(impactArray, opts)
  .impact-component
    each group in impactArray
      .impact-group
        if opts.title
          .impact-group-title=group.title
        .impact-list
          each impact in group.list
            +impactToggle(impact)
    input.switch-display(type='hidden' name='attr_impact_total' value=0)
    if opts.customImpacts
      .custom-impacts
        h4.i18n-text.other-impacts-title(data-i18n='impact-others')
        each value in [ 1, 2 ]
          +otherImpact(value)