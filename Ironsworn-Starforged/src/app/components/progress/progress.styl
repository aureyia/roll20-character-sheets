
button
  &[name=act_progress-clear], &[name=act_progress-recommit]
    btn()


.repcontainer
  display flex
  flex-flow column
  gap 1em
  .repitem
    border-bottom 4px solid $color_fg
    padding-bottom 0.5em

input
  &.progress-name
    background $color_input
    borderCommon()
    border-radius 0
    margin-bottom 0.2em
    margin-top 1em
    background #e6e7e8
    borderCommon()
    border-radius 0
    margin-bottom 0.2em
    width 100%
    &:focus
      outline 3px solid $color_highlight
      outline-offset 0
      box-shadow inset 0 0 0 2px


.progress-track
  display grid
  grid-template-columns 1fr
  grid-auto-columns max-content
  gap 0.5em
  .progress-name
    grid-row 1
    grid-column 1
    margin 0
  .challenge-rank-radio
    grid-row 2
    grid-column 1
    margin 0
  .challenge-rank-edit // only shown when rank is set
    grid-row 1
    grid-column 2 / span 2
    margin 0
  .progress-track-bar
    grid-row 2 / span 2
    grid-column 1
    margin 0
  button.progress-track-bar
    border 0
    color $color_fg
    &:hover
      color $color_cta
  button[name=act_roll-progress]
    grid-row 2
    grid-column 2 / span 2
    margin 0
    iconBefore(1.35em, $icon_progress_roll, -0.25em 0.5ch -0.25em -0.25em)
  button[name=act_progress-clear]
    grid-row 3
    grid-column 2
    margin 0
  button[name=act_progress-recommit]
    grid-row 3
    grid-column 3
    margin 0

.progress-track-bar
  display flex
  flex-flow row
  gap 0.25rem
  align-items center

.progress-box
  height max-content
  margin 0
  flex-basis 10%
  transition 0.5s ease
  display flex
  flex-flow column
  shrinkWrap()
  text-align center
  justify-content center
  align-items center
  padding 2px
  margin 0
  cursor pointer
  borderCommon(3px, currentColor)
  border-radius 15%
  &:after
    height 0
    width 100%
    padding-bottom 100%
    mask-size contain
    mask-repeat no-repeat
    mask-position center
    mask-origin border-box
    content ""

.progress-box-control
  for num in 0..4
    $bg_image = $icon_progress_ticks[num]
    &[value^={'"'+num+'"'}] + .progress-box
      &:after
        background-color currentColor
        mask-image url($bg_image)

$challenge_ranks = {
  troublesome: 1,
  dangerous: 2,
  formidable: 3,
  extreme: 4,
  epic: 5
}

.challenge-rank-radio
  display flex
  justify-content space-between
  align-items center
  gap 0.5em
  margin 0

.challenge-rank-option
  margin 0


/* collapses "select challenge rank" radios when challenge rank is set; shows only */

.challenge-rank-edit > span
  display none

for $rankStr, $rankInt in $challenge_ranks
  $rankColor = $sf_gradient_5[$rankInt - 1]
  .challenge-rank-{$rankStr}
    colorThemeDarkColor($rankColor)
    border-color $rankColor
  input[name="attr_rank"]
    &[value^={\"}{$rankInt}{\"}]
      ~ .challenge-rank-edit
        colorThemeDarkColor($rankColor)
        border-color $rankColor
        & > span[data-i18n=difficulty-{$rankStr}]
          display contents
      ~ .challenge-rank-radio .challenge-rank-{$rankStr}
        colorThemeDarkColor($rankColor)
        border-color $rankColor

input[name="attr_rank"]:not([value^="0"]) ~
  .challenge-rank-radio
    display none

input[name="attr_rank"][value^="0"] ~
  button, .progress-track-bar, .challenge-rank-edit
    display none
  .challenge-rank-radio
    display flex




    // color $color_fg
